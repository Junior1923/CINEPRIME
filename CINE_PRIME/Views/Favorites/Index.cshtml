@model IEnumerable<CINE_PRIME.ViewModels.FavoriteItemVM>

@{
	ViewData["Title"] = "Mis Favoritos";
}

<h2 class="mb-4 text-light fw-bold">❤️ Mis Favoritos</h2>

@if (!Model.Any())
{
	<div class="text-center text-muted mt-5">
		<h5>No has agregado películas o series a favoritos.</h5>
	</div>
}
else
{
	<div class="row">
		@foreach (var fav in Model)
		{
			var posterUrl = !string.IsNullOrEmpty(fav.Poster)
			? $"https://image.tmdb.org/t/p/w500{fav.Poster}"
			: "/images/no-image.png"; // opcional si quieres placeholder

			<div class="col-md-3 mb-4">
				<div class="card bg-dark text-white shadow-sm border-0 movie-card">

					<!-- Poster -->
					<img src="@posterUrl" class="card-img-top" alt="@fav.Title" />

					<div class="card-body text-center">

						<h5 class="card-title">@fav.Title</h5>

						<p class="card-text text-warning">
							⭐ @fav.Rating.ToString("0.0")
						</p>

						<p class="text-muted small">@fav.ReleaseDate</p>

						<!-- Ir a detalles -->
						<a asp-controller="@(fav.MediaType == "movie" ? "Movies" : "Series")"
						   asp-action="Details"
						   asp-route-id="@fav.MediaId"
						   class="btn btn-sm btn-primary mb-2 w-100">

							Ver detalles
						</a>

						<!-- Eliminar favorito -->
						<form asp-action="Remove" method="post" class="w-100">
							<input type="hidden" name="favoritoId" value="@fav.FavoriteId" />
							<button type="submit" class="btn btn-sm btn-outline-danger w-100">
								Eliminar
							</button>
						</form>
					</div>

				</div>
			</div>
		}
	</div>
}
